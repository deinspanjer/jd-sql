[
  {
    "name": "custom: jd_equal true for identical json",
    "description": "Direct call to jd_equal should return true",
    "category": "jd-sql-custom",
    "sql_function": "jd_equal",
    "content_a": "{\"a\":1}",
    "content_b": "{\"a\":1}",
    "expected_result": "true",
    "expected_exit": 0
  },
  {
    "name": "custom: jd_equal false when different",
    "description": "Direct call to jd_equal should return false",
    "category": "jd-sql-custom",
    "sql_function": "jd_equal",
    "content_a": "{\"a\":1}",
    "content_b": "{\"a\":2}",
    "expected_result": "false",
    "expected_exit": 1
  },
  {
    "name": "custom: jd_diff_text simple change",
    "description": "Direct call to jd_diff_text should render text hunk",
    "category": "jd-sql-custom",
    "sql_function": "jd_diff_text",
    "content_a": "{\"a\":1}",
    "content_b": "{\"a\":2}",
    "expected_result": "@ [\"a\"]\n- 1\n+ 2\n",
    "expected_exit": 1
  },
  {
    "name": "custom: jd_apply_patch rfc6902",
    "description": "Apply RFC6902 patch via jd_apply_patch",
    "category": "jd-sql-custom",
    "sql_function": "jd_apply_patch",
    "content_a": "{\"a\":1}",
    "content_b": "[{\"op\":\"replace\",\"path\":\"/a\",\"value\":2},{\"op\":\"add\",\"path\":\"/b\",\"value\":3}]",
    "expected_result": "{\"a\":2,\"b\":3}",
    "expected_exit": 0
  },
  {
    "name": "custom: translate jd text to patch",
    "description": "Translate jd text to RFC6902 using jd_translate_diff_format",
    "category": "jd-sql-custom",
    "sql_function": "jd_translate_diff_format",
    "sql_function_args": ["jd", "patch"],
    "content_a": "@ [\"a\"]\n- 1\n+ 2\n",
    "expected_result": "[{\"op\":\"test\",\"path\":\"/a\",\"value\":1},{\"op\":\"remove\",\"path\":\"/a\",\"value\":1},{\"op\":\"add\",\"path\":\"/a\",\"value\":2}]",
    "expected_exit": 0
  }
]
